# Claude Code UI Environment Configuration
# Only includes variables that are actually used in the code
#
# 使用方法：复制此文件为 .env 并填写实际值
# cp .env.example .env

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Node 环境
NODE_ENV=development

# Backend server port (Express API + WebSocket server)
# API server
PORT=3001
#Frontend port
VITE_PORT=5173

# Uncomment the following line if you have a custom claude cli path other than the default "claude"
# CLAUDE_CLI_PATH=claude

# =============================================================================
# PATH 环境变量（必需）
# =============================================================================
# 用于子进程找到 node 命令
# macOS (Homebrew):
PATH=/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
# Linux:
# PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
# Windows (Git Bash):
# PATH=/c/Program Files/nodejs:/usr/bin:/bin

# =============================================================================
# JWT 配置
# =============================================================================
# JWT 密钥（生产环境必须更改）
JWT_SECRET=your-secret-key-change-in-production

# =============================================================================
# CONTAINER CONFIGURATION (REQUIRED)
# =============================================================================
# This project requires Docker container mode for all operations.
# All file operations and AI executions are performed through user-specific
# Docker containers for security and isolation.

# 是否启用容器模式
CONTAINER_MODE=enabled

# Docker image to use for sandbox containers
# Default: claude-code-sandbox:latest
# Ensure this image is built and available locally
CONTAINER_IMAGE=claude-code-sandbox:latest

# Docker network name for container communication
# Default: claude-code-network
# This network will be created automatically if it doesn't exist
CONTAINER_NETWORK=claude-code-network

# Docker socket path (for non-macOS systems)
# Only needed if Docker socket is not at the default location
# DOCKER_HOST=/var/run/docker.sock

# Docker certificate path (for remote Docker connections)
# Only needed for TLS-secured Docker daemons
# DOCKER_CERT_PATH=/path/to/docker/certs

# =============================================================================
# REQUIREMENTS
# =============================================================================
# - Docker must be installed and running
# - Docker daemon must be accessible
# - Sufficient system resources for multiple containers
# - Container image must be built: docker build -t claude-code-sandbox:latest -f docker/Dockerfile.sandbox .

# =============================================================================
# BENEFITS OF CONTAINERIZATION
# =============================================================================
# - User isolation: Each user gets their own container
# - Security: All operations are sandboxed
# - Resource limits: CPU and memory can be controlled per user
# - Cleanup: Containers can be easily destroyed and recreated

# Claude Code context window size (maximum tokens per session)
VITE_CONTEXT_WINDOW=160000
CONTEXT_WINDOW=160000

# =============================================================================
# CUSTOM ANTHROPIC API CONFIGURATION
# =============================================================================

# Custom Anthropic-compatible API endpoint
# Use this to connect to custom API endpoints (e.g., 智谱 GLM, local models, etc.)
# Default: https://api.anthropic.com (if not specified)
# ANTHROPIC_BASE_URL=https://open.bigmodel.cn/api/anthropic

# Custom Anthropic API key
# If not specified, the SDK will use the default ANTHROPIC_AUTH_TOKEN from your environment
# ANTHROPIC_API_KEY=your-api-key-here

# Custom model name
# Override the default model selection with a custom model identifier
# This can be used to specify models like 'glm-4.7', 'custom-model', etc.
# ANTHROPIC_MODEL=glm-4.7

# VITE_IS_PLATFORM=false

# =============================================================================
# SAML 单点登录配置（可选）
# =============================================================================

# 是否启用 SAML 登录
SAML_ENABLED=false

# 是否启用 SP 请求签名（某些 IdP 要求，某些不需要）
# 如果 IdP 返回 500 错误，尝试设置为 false
SAML_ENABLE_REQUEST_SIGNING=false

# IdP 配置
# SAML_ENTITY_ID: IdP 的 Entity ID（从 IdP 元数据中获取）
SAML_ENTITY_ID=https://your-idp.com/idp/metadata
# SAML_SSO_URL: IdP 的 SSO 登录地址
SAML_SSO_URL=https://your-idp.com/idp/login
# SAML_SLO_URL: IdP 的 SLO 登出地址（可选）
SAML_SLO_URL=https://your-idp.com/idp/logout

# IdP 证书（用于验证 IdP 的签名）
# 从 IdP 元数据中获取证书内容
SAML_IDP_CERTIFICATE="-----BEGIN CERTIFICATE-----\nYOUR_IDP_CERTIFICATE_CONTENT_HERE\n-----END CERTIFICATE-----"

# SP 证书和私钥（用于签署 SAML 请求）
# 某些 IdP（如企业微信）要求 SP 必须签署请求
# 可以使用以下命令生成自签名证书：
# openssl req -newkey rsa:2048 -nodes -keyout sp-key.pem -x509 -days 365 -out sp-cert.pem
SAML_SP_CERTIFICATE="-----BEGIN CERTIFICATE-----\nYOUR_SP_CERTIFICATE_CONTENT_HERE\n-----END CERTIFICATE-----"
SAML_SP_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYOUR_SP_PRIVATE_KEY_CONTENT_HERE\n-----END PRIVATE KEY-----"

# SP 配置
# SAML_ISSUER: SP Entity ID（Issuer），需要与 IdP 管理后台配置一致
SAML_ISSUER=http://localhost:3001/api/auth/saml
# SAML_CALLBACK_URL: ACS URL（回调地址），IdP 验证成功后会 POST SAMLResponse 到这个地址
SAML_CALLBACK_URL=http://localhost:3001/api/auth/saml/callback
# SAML_LOGOUT_CALLBACK_URL: SLO URL（登出回调地址，可选）
SAML_LOGOUT_CALLBACK_URL=http://localhost:3001/api/auth/saml/logout/callback

# 前端应用 URL（用于 SAML 登录成功后的重定向）
FRONTEND_URL=http://localhost:5173/chat
